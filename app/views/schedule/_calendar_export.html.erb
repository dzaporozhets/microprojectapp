<div class="bg-white dark:bg-gray-800 shadow-sm rounded-lg p-4 mb-4">
  <h3 class="text-lg font-semibold mb-2">Calendar Export</h3>
  <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
    Subscribe to your tasks with due dates in your favorite calendar application.
  </p>
  
  <div class="flex items-center">
    <div class="flex-grow">
      <input
        type="text"
        value="<%= calendar_url(current_user) %>"
        readonly
        class="w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-700 rounded-md bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100"
        onclick="this.select();"
      >
    </div>
    <button
      class="ml-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm"
      onclick="navigator.clipboard.writeText('<%= calendar_url(current_user) %>'); this.innerText = 'Copied!'; setTimeout(() => this.innerText = 'Copy', 2000);"
    >
      Copy
    </button>
  </div>
  
  <div class="mt-3 flex items-center">
    <%= link_to calendar_schedule_path(token: current_user.calendar_token, format: :ics), class: "flex items-center text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300" do %>
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-1">
        <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" />
      </svg>
      Download Calendar File
    <% end %>
  </div>
  
  <div class="mt-2 text-xs text-gray-500 dark:text-gray-500">
    <p>This URL contains a secure token. If you think it has been compromised, you can regenerate it in your account settings.</p>
  </div>
</div>