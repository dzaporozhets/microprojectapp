<div class="w-full">
  <% content_for :title, "Schedule" %>

  <% content_for :subnav do %>
    <div class="<%= subnav_css %>">
      <div class="flex flex-wrap  justify-between items-center mx-auto max-w-screen-md px-4">
        <%= home_tabs "Schedule" %>

        <% link_to tasks_path, class: "btn-gray block" do %>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-gray-400 dark:text-gray-600">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />
          </svg>
        <% end %>
      </div>
    </div>
  <% end %>



  <!-- Tasks Section -->
  <div class="mb-8">
    <%= render 'tasks' %>
  </div>

  <!-- Calendar Export Section -->
  <div class="mb-8">
    <% if current_user.calendar_token.present? %>
      <%= render 'calendar_export' %>
    <% else %>
      <div class="bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 text-yellow-800 dark:text-yellow-200 rounded-md p-4">
        <h3 class="text-base font-semibold mb-2">Calendar Export Unavailable</h3>
        <p class="text-sm">
        You need to generate a calendar token before you can export or subscribe to your schedule. Please visit your <%= link_to 'account settings', users_account_path, class: "underline" %> to generate one.
        </p>
      </div>
    <% end %>
  </div>
</div>
