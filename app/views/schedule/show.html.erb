<div class="w-full">
  <% content_for :title, "Schedule" %>

  <% content_for :subnav do %>
    <div class="<%= subnav_css %>">
      <div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-md px-4">
        <%= home_tabs "Tasks" %>

        <div class="hidden w-auto sm:flex sm:flex-row items-center space-x-6">
          <div class="w-auto ml-auto">
            <%= content_tag :div, class: sub_subnav do %>
              <%= link_to "List", tasks_path, class: "#{current_page?(tasks_path) ? sub_subnav_active_tab : sub_subnav_tab}" %>
              <%= link_to "Schedule", schedule_path, class: "#{current_page?(schedule_path) ? sub_subnav_active_tab : sub_subnav_tab}" %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  <% end %>



  <!-- Tasks Section -->
  <div class="mb-8">
    <%= render 'tasks' %>
  </div>

  <!-- Calendar Export Section -->
  <div class="mb-8">
    <% if current_user.calendar_token.present? %>
      <%= render 'calendar_export' %>
    <% else %>
      <div class="bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 text-yellow-800 dark:text-yellow-200 rounded-md p-4">
        <h3 class="text-base font-semibold mb-2">Calendar Export Unavailable</h3>
        <p class="text-sm">
        You need to generate a calendar token before you can export or subscribe to your schedule. Please visit your <%= link_to 'account settings', users_account_path, class: "underline" %> to generate one.
        </p>
      </div>
    <% end %>
  </div>
</div>
