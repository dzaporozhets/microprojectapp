<div class="calendar bg-white dark:bg-gray-800 shadow-sm rounded-md p-4 mb-4">
  <!-- Three Month Layout -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    <!-- Previous Month -->
    <%= render_calendar_month(@date.prev_month, @daily_task_counts, params[:date]) %>

    <!-- Current Month -->
    <%= render_calendar_month(@date, @daily_task_counts, params[:date]) %>

    <!-- Next Month -->
    <%= render_calendar_month(@date.next_month, @daily_task_counts, params[:date]) %>
  </div>

  <!-- Navigation Buttons -->
  <div class="flex items-center justify-center mt-4">
    <%= link_to schedule_path(date: @date.prev_month), class: "border rounded-full dark:border-gray-600 prev-month flex items-center justify-center p-2 text-gray-400 hover:text-gray-500" do %>
      <span class="sr-only">Previous month</span>
      <svg class="size-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
        <path fill-rule="evenodd" d="M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd" />
      </svg>
    <% end %>
    <%= link_to schedule_path(date: @date.next_month), class: "border rounded-full dark:border-gray-600 next-month ml-2 flex items-center justify-center p-2 text-gray-400 hover:text-gray-500" do %>
      <span class="sr-only">Next month</span>
      <svg class="size-4" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
        <path fill-rule="evenodd" d="M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
      </svg>
    <% end %>
  </div>

  <!-- Calendar Legend -->
  <div class="mt-6 pt-4 border-t border-gray-200 dark:border-gray-700">
    <div class="flex flex-wrap items-center justify-center gap-4 text-xs text-gray-600 dark:text-gray-400">
      <div class="flex items-center gap-2">
        <div class="w-4 h-4 rounded-full bg-violet-300 dark:bg-violet-500"></div>
        <span>Selected & Today</span>
      </div>
      <div class="flex items-center gap-2">
        <div class="w-4 h-4 rounded-full bg-indigo-100 dark:bg-indigo-400"></div>
        <span>Selected Date</span>
      </div>
      <div class="flex items-center gap-2">
        <div class="w-4 h-4 rounded-full ring-2 ring-red-300 dark:ring-red-500 bg-white dark:bg-gray-800"></div>
        <span>Today</span>
      </div>
      <div class="flex items-center gap-2">
        <div class="w-4 h-4 rounded-full <%= theme_bg %>"></div>
        <span>Has Tasks</span>
      </div>
    </div>
  </div>
</div>
