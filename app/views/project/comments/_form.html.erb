<%= turbo_frame_tag dom_task_comment_form_id(@task) do %>
  <%= form_with(model: [ @task.project, @task, Comment.new ], local: true, id: 'new_comment_form', html: { multipart: true }, data: { controller: "submit-on-ctrl-enter" }) do |form| %>
    <div class="comment-row items-start gap-3">
      <div class="flex-shrink-0">
        <%= avatar_tag(current_user, "h-8 w-8 rounded-full bg-gray-200 dark:bg-gray-600") %>
      </div>
      <div class="flex-1 min-w-0">
        <div class="overflow-hidden rounded-lg border border-gray-300 focus-within:ring-2 focus-within:ring-violet-600 dark:border-gray-600 dark:bg-gray-700">
          <label for="comment" class="sr-only">Add your comment</label>
          <%= form.text_area :body, required: true, rows: 3, class: "block w-full resize-none border-0 p-3 text-gray-900 placeholder-gray-400 focus:ring-0 sm:text-sm dark:bg-gray-800 dark:focus:bg-gray-950 dark:text-gray-300", placeholder: "Type your comment here...", data: { submit_on_ctrl_enter_target: "textarea" } %>
        </div>

        <div class="mt-3 flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-3 sm:space-y-0">
          <div class="flex-1">
            <%= styled_file_field(form, :attachment) %>
          </div>
          <div class="flex-shrink-0">
            <%= form.submit 'Comment', class: "btn-base" %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
<% end %>
