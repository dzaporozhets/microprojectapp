<div>
  <div class="text-secondary space-y-1">
    <% if task.note_id %>
      <div class="flex items-center">
        <span class="w-24">Note:</span>
        <span>
          <%= link_to task.note&.title, [task.project, task.note], target: '_blank', class: 'underline hover:text-gray-900 dark:hover:text-gray-100' %>
        </span>
      </div>
    <% end %>

    <% if task.assigned_user_id %>
      <div class="flex items-center">
        <span class="w-24">Assigned:</span>
        <span><%= task.assigned_user&.email %></span>
      </div>
    <% end %>

    <% if task.due_date.present? %>
      <div class="flex items-center">
        <span class="w-24">Due:</span>
        <span class="flex items-center gap-2">
          <%= l(task.due_date.to_date, format: :long) %>
          <% if !task.done? && task.due_date < Date.current %>
            <span class="status-dot-overdue" title="Overdue task" aria-label="Overdue task"></span>
          <% end %>
        </span>
      </div>
    <% end %>

    <div class="flex items-center">
      <span class="w-24">Created:</span>
      <span><%= "#{l(task.created_at, format: :long)} by #{task.user.email}" %></span>
    </div>

    <div class="flex items-center">
      <span class="w-24">Updated:</span>
      <span>
        <% if task.updated_by_user.present? %>
          <%= "#{l(task.updated_at, format: :long)} by #{task.updated_by_user.email}" %>
        <% elsif task.updated_by_user_id.present? %>
          <%= "#{l(task.updated_at, format: :long)} by (deleted)" %>
        <% else %>
          <%= l(task.updated_at, format: :long) %>
        <% end %>
      </span>
    </div>

    <% if task.done && task.done_at %>
      <div class="flex items-center">
        <span class="w-24">Completed at:</span>
        <span><%= l(task.done_at, format: :long) %></span>
      </div>
    <% end %>
  </div>
</div>
