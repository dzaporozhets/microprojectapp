<% content_for :subnav do %>
  <div class="<%= subnav_css %>">
    <div class="flex flex-wrap justify-between items-center mx-auto max-w-screen-lg px-4">
      <%= admin_tabs 'Users' %>
    </div>
  </div>
<% end %>

<div class="lg:w-2/3 mx-auto mt-4 space-y-6">
  <!-- User Header -->
  <div class="resource-container">
    <div class="resource-header">
      <div>
        <h1 class="resource-title"><%= @user.email %></h1>
        <p class="resource-description">User account details and statistics.</p>
      </div>
    </div>
  </div>

  <!-- Account Information -->
  <div class="resource-container">
    <div class="resource-header">
      <div>
        <h2 class="resource-title">Account Information</h2>
        <p class="resource-description">Basic account details and settings.</p>
      </div>
    </div>

    <div class="divide-y divide-gray-200 dark:divide-gray-700 space-y-0">
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">ID</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.id %></dd>
      </div>
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">Email</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.email %></dd>
      </div>
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">Confirmed At</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.confirmed_at %></dd>
      </div>
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">Confirmation Sent At</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.confirmation_sent_at %></dd>
      </div>
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">Unconfirmed Email</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.unconfirmed_email %></dd>
      </div>
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">Created At</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.created_at %></dd>
      </div>
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">Updated At</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.updated_at %></dd>
      </div>
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">Admin</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.admin %></dd>
      </div>
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">Allow Invites</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.allow_invites %></dd>
      </div>
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">Provider</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.provider %></dd>
      </div>
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">Created from OAuth</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.created_from_oauth %></dd>
      </div>
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">OAuth Linked At</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.oauth_linked_at %></dd>
      </div>
    </div>
  </div>

  <!-- User Statistics -->
  <div class="resource-container">
    <div class="resource-header">
      <div>
        <h2 class="resource-title">User Statistics</h2>
        <p class="resource-description">Database records and activity metrics.</p>
      </div>
    </div>

    <div class="divide-y divide-gray-200 dark:divide-gray-700 space-y-0">
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">Projects created</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.projects.count %></dd>
      </div>
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">Tasks created</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.tasks.count %></dd>
      </div>
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">Comments created</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.comments.count %></dd>
      </div>
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">Failed Attempts</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.failed_attempts %></dd>
      </div>
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">Locked At</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.locked_at %></dd>
      </div>
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">Confirmation sent at</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.confirmation_sent_at %></dd>
      </div>
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">Confirmed at</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.confirmed_at %></dd>
      </div>
      <div class="flex justify-between items-center p-4">
        <dt class="text-sm font-medium text-gray-900 dark:text-gray-200">Unconfirmed email</dt>
        <dd class="text-sm text-gray-700 dark:text-gray-300"><%= @user.unconfirmed_email %></dd>
      </div>
    </div>
  </div>

  <!-- Delete Account -->
  <% unless current_user == @user %>
    <div class="resource-container border-red-500 border-2">
      <div class="resource-header">
        <div>
          <h2 class="resource-title text-red-600 dark:text-red-400">Delete Account</h2>
          <p class="resource-description">This will completely remove the account. All data will be lost.</p>
        </div>
      </div>

      <div class="p-4">
        <%= button_to 'Delete this account', admin_user_path(@user), method: :delete, data: { turbo_confirm: "Delete account with all the data? Are you sure?", confirm: "Are you sure you want to delete this user?" }, class: 'px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm' %>
      </div>
    </div>
  <% end %>
</div>
